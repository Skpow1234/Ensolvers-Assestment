
# **Backend README**

## **Project Overview**

This backend application is built using **FastAPI** and follows a layered architecture to ensure modularity, scalability, and maintainability. It supports CRUD operations for **notes** and **tags**, includes features for tagging notes and archiving/unarchiving notes, and is integrated with a **PostgreSQL** database using **SQLAlchemy**.

---

## **Project Structure**

The project is organized into the following layers:

### **Folders and Files**

``` bash
backend/
├── app/
│   ├── __init__.py                # Initializes the app module
│   ├── main.py                    # Application entry point
│   ├── routes/                    # Contains API endpoints
│   │   ├── __init__.py
│   │   ├── note_routes.py         # Routes for note-related operations
│   │   ├── tag_routes.py          # Routes for tag-related operations
│   ├── services/                  # Contains business logic
│   │   ├── __init__.py
│   │   ├── note_service.py        # Logic for note operations
│   │   ├── tag_service.py         # Logic for tag operations
│   ├── repositories/              # Handles database operations
│   │   ├── __init__.py
│   │   ├── note_repository.py     # Database operations for notes
│   │   ├── tag_repository.py      # Database operations for tags
│   ├── models/                    # Defines database models
│   │   ├── __init__.py
│   │   ├── note_model.py          # Note model
│   │   ├── tag_model.py           # Tag model
│   ├── database.py                # Database connection and session management
│   ├── config.py                  # Configuration for environment variables
├── requirements.txt               # Python dependencies
├── alembic/                       # Migrations folder (generated by Alembic)
│   ├── env.py                     # Alembic environment
│   ├── script.py.mako             # Alembic template
│   ├── versions/                  # Migration scripts
└── README.md                      # This documentation
```

---

## **Key Tools and Versions**

### **Languages**

- **Python 3.10+**: Required for FastAPI.

### **Frameworks and Libraries**

- **FastAPI 0.95.2**: Web framework for creating APIs.
- **SQLAlchemy 1.4.41**: ORM for interacting with the PostgreSQL database.
- **Pydantic 1.10.4**: Data validation and serialization.
- **Alembic 1.10.1**: Database migration tool.

### **Database**

- **PostgreSQL 15.2**: Relational database for persisting data.

### **Development Tools**

- **uvicorn 0.20.0**: ASGI server for running FastAPI.
- **psycopg2-binary 2.9.6**: PostgreSQL database adapter.

---

## **Setup and Installation**

### **Prerequisites**

- Python 3.10+
- PostgreSQL 15.2 installed and running.
- `pip` for managing Python packages.

### **Steps to Set Up the Project**

1. **Set Up a Virtual Environment**

   ```bash
   python3 -m venv venv
   source venv/bin/activate  # For Linux/macOS
   ```

2. **Install Dependencies**

   ```bash
   pip install -r requirements.txt
   ```

3. **Configure the Database**
   Update the `DATABASE_URL` in **`app/database.py`** with your PostgreSQL credentials:

   ```python
   DATABASE_URL = "postgresql://<user>:<password>@localhost:<port>/<database>"
   ```

4. **Run Database Migrations**
   Initialize and run the migrations using Alembic:

   ```bash
   alembic init alembic
   alembic revision --autogenerate -m "Initial schema"
   alembic upgrade head
   ```

5. **Run the Server**
   Start the FastAPI application using Uvicorn:

   ```bash
   uvicorn app.main:app --reload
   ```

6. **Access the API**
   The API is now running at `http://127.0.0.1:8000`. Swagger documentation is available at `http://127.0.0.1:8000/docs`.

---

## **Features**

### **Notes Endpoints**

- **Create Note**: `POST /api/notes`
- **Get All Notes**: `GET /api/notes?archived=<true/false>`
- **Get Single Note**: `GET /api/notes/{note_id}`
- **Update Note**: `PUT /api/notes/{note_id}`
- **Delete Note**: `DELETE /api/notes/{note_id}`
- **Archive Note**: `POST /api/notes/{note_id}/archive`
- **Unarchive Note**: `POST /api/notes/{note_id}/unarchive`
- **Add Tag to Note**: `POST /api/notes/{note_id}/tags/{tag_id}`
- **Remove Tag from Note**: `DELETE /api/notes/{note_id}/tags/{tag_id}`

### **Tags Endpoints**

- **Create Tag**: `POST /api/tags`
- **Get All Tags**: `GET /api/tags`
- **Get Single Tag**: `GET /api/tags/{tag_id}`
- **Delete Tag**: `DELETE /api/tags/{tag_id}`

---

## **Layered Architecture**

### **Routes**

The `routes/` folder defines the API endpoints for both `notes` and `tags`. These act as the entry points to the application and delegate requests to the appropriate services.

### **Services**

The `services/` folder encapsulates the business logic of the application. Each service interacts with a repository to perform CRUD operations.

### **Repositories**

The `repositories/` folder abstracts database operations using SQLAlchemy. This separation ensures that database logic is isolated from the business logic.

### **Models**

The `models/` folder contains SQLAlchemy models for `notes` and `tags`. These define the structure of the database tables and relationships.

### **Database**

The `database.py` file initializes the database engine and session. It also provides utilities for session management.

---

## **Runtime Specifications**

- **Python**: `python3.10`
- **PostgreSQL**: `15.2`
- **Uvicorn**: `0.20.0`
- **Alembic**: `1.10.1`

---

## **Key Considerations**

- **Scalability**: The layered architecture allows for easy expansion.
- **Maintainability**: Separation of concerns (Routes, Services, Repositories) simplifies updates.
- **Documentation**: Swagger provides detailed API documentation.

---
